/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { isObservable, of } from "rxjs";
import { map } from "rxjs/operators";
import { DynamicFormValueControlModel } from "./dynamic-form-value-control.model";
import { serializable, serialize } from "../decorator/serializable.decorator";
import { isBoolean } from "../utils/core.utils";
/**
 * @record
 * @template T
 */
export function DynamicFormOptionConfig() { }
if (false) {
    /** @type {?|undefined} */
    DynamicFormOptionConfig.prototype.disabled;
    /** @type {?|undefined} */
    DynamicFormOptionConfig.prototype.label;
    /** @type {?} */
    DynamicFormOptionConfig.prototype.value;
}
/**
 * @template T
 */
export class DynamicFormOption {
    /**
     * @param {?} config
     */
    constructor(config) {
        this.disabled = isBoolean(config.disabled) ? config.disabled : false;
        this.label = config.label || null;
        this.value = config.value;
    }
    /**
     * @return {?}
     */
    get text() {
        return this.label;
    }
    /**
     * @param {?} text
     * @return {?}
     */
    set text(text) {
        this.label = text;
    }
    /**
     * @return {?}
     */
    toJSON() {
        return serialize(this);
    }
}
tslib_1.__decorate([
    serializable(),
    tslib_1.__metadata("design:type", Boolean)
], DynamicFormOption.prototype, "disabled", void 0);
tslib_1.__decorate([
    serializable(),
    tslib_1.__metadata("design:type", String)
], DynamicFormOption.prototype, "label", void 0);
tslib_1.__decorate([
    serializable(),
    tslib_1.__metadata("design:type", Object)
], DynamicFormOption.prototype, "value", void 0);
if (false) {
    /** @type {?} */
    DynamicFormOption.prototype.disabled;
    /** @type {?} */
    DynamicFormOption.prototype.label;
    /** @type {?} */
    DynamicFormOption.prototype.value;
}
/**
 * @record
 * @template T
 */
export function DynamicOptionControlModelConfig() { }
if (false) {
    /** @type {?|undefined} */
    DynamicOptionControlModelConfig.prototype.options;
}
/**
 * @abstract
 * @template T
 */
export class DynamicOptionControlModel extends DynamicFormValueControlModel {
    /**
     * @protected
     * @param {?} config
     * @param {?=} layout
     */
    constructor(config, layout) {
        super(config, layout);
        this._options = [];
        this.options = config.options;
    }
    /**
     * @private
     * @return {?}
     */
    updateOptions$() {
        this.options$ = of(this.options);
    }
    /**
     * @param {?} options
     * @return {?}
     */
    set options(options) {
        if (Array.isArray(options)) {
            this._options = ((/** @type {?} */ (options))).map((/**
             * @param {?} optionConfig
             * @return {?}
             */
            optionConfig => {
                return new DynamicFormOption(optionConfig);
            }));
            this.updateOptions$();
        }
        else if (isObservable(options)) {
            this.options$ = ((/** @type {?} */ (options))).pipe(map((/**
             * @param {?} optionsConfig
             * @return {?}
             */
            optionsConfig => {
                /** @type {?} */
                let options = optionsConfig.map((/**
                 * @param {?} optionConfig
                 * @return {?}
                 */
                optionConfig => new DynamicFormOption(optionConfig)));
                this._options = options;
                return options;
            })));
        }
        else {
            this.updateOptions$();
        }
    }
    /**
     * @return {?}
     */
    get options() {
        return this._options;
    }
    /**
     * @param {?} optionConfig
     * @return {?}
     */
    add(optionConfig) {
        return this.insert(this.options.length, optionConfig);
    }
    /**
     * @param {?} index
     * @return {?}
     */
    get(index) {
        return this.options[index];
    }
    /**
     * @param {?} index
     * @param {?} optionConfig
     * @return {?}
     */
    insert(index, optionConfig) {
        /** @type {?} */
        let option = new DynamicFormOption(optionConfig);
        this.options.splice(index, 0, option);
        this.updateOptions$();
        return option;
    }
    /**
     * @param {...?} indices
     * @return {?}
     */
    remove(...indices) {
        indices.forEach((/**
         * @param {?} index
         * @return {?}
         */
        index => this.options.splice(index, 1)));
        this.updateOptions$();
    }
}
tslib_1.__decorate([
    serializable("options"),
    tslib_1.__metadata("design:type", Array)
], DynamicOptionControlModel.prototype, "_options", void 0);
if (false) {
    /**
     * @type {?}
     * @private
     */
    DynamicOptionControlModel.prototype._options;
    /** @type {?} */
    DynamicOptionControlModel.prototype.options$;
    /**
     * @abstract
     * @param {...?} indices
     * @return {?}
     */
    DynamicOptionControlModel.prototype.select = function (indices) { };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pYy1vcHRpb24tY29udHJvbC5tb2RlbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuZy1keW5hbWljLWZvcm1zL2NvcmUvIiwic291cmNlcyI6WyJsaWIvbW9kZWwvZHluYW1pYy1vcHRpb24tY29udHJvbC5tb2RlbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBYyxZQUFZLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3BELE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNyQyxPQUFPLEVBQUUsNEJBQTRCLEVBQXNDLE1BQU0sb0NBQW9DLENBQUM7QUFFdEgsT0FBTyxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUM5RSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0scUJBQXFCLENBQUM7Ozs7O0FBRWhELDZDQUtDOzs7SUFIRywyQ0FBbUI7O0lBQ25CLHdDQUFlOztJQUNmLHdDQUFTOzs7OztBQUdiLE1BQU0sT0FBTyxpQkFBaUI7Ozs7SUFNMUIsWUFBWSxNQUFrQztRQUUxQyxJQUFJLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUNyRSxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztJQUM5QixDQUFDOzs7O0lBRUQsSUFBSSxJQUFJO1FBQ0osT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3RCLENBQUM7Ozs7O0lBRUQsSUFBSSxJQUFJLENBQUMsSUFBbUI7UUFDeEIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7SUFDdEIsQ0FBQzs7OztJQUVELE1BQU07UUFDRixPQUFP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OzsyREFBK0M7Ozs7OztJQUF2RSw2Q0FBdUU7O0lBQ3ZFLDZDQUE2Qzs7Ozs7O0lBcUU3QyxvRUFBNEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYnNlcnZhYmxlLCBpc09ic2VydmFibGUsIG9mIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IG1hcCB9IGZyb20gXCJyeGpzL29wZXJhdG9yc1wiO1xuaW1wb3J0IHsgRHluYW1pY0Zvcm1WYWx1ZUNvbnRyb2xNb2RlbCwgRHluYW1pY0Zvcm1WYWx1ZUNvbnRyb2xNb2RlbENvbmZpZyB9IGZyb20gXCIuL2R5bmFtaWMtZm9ybS12YWx1ZS1jb250cm9sLm1vZGVsXCI7XG5pbXBvcnQgeyBEeW5hbWljRm9ybUNvbnRyb2xMYXlvdXQgfSBmcm9tIFwiLi9taXNjL2R5bmFtaWMtZm9ybS1jb250cm9sLWxheW91dC5tb2RlbFwiO1xuaW1wb3J0IHsgc2VyaWFsaXphYmxlLCBzZXJpYWxpemUgfSBmcm9tIFwiLi4vZGVjb3JhdG9yL3NlcmlhbGl6YWJsZS5kZWNvcmF0b3JcIjtcbmltcG9ydCB7IGlzQm9vbGVhbiB9IGZyb20gXCIuLi91dGlscy9jb3JlLnV0aWxzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHluYW1pY0Zvcm1PcHRpb25Db25maWc8VD4ge1xuXG4gICAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICAgIGxhYmVsPzogc3RyaW5nO1xuICAgIHZhbHVlOiBUO1xufVxuXG5leHBvcnQgY2xhc3MgRHluYW1pY0Zvcm1PcHRpb248VD4ge1xuXG4gICAgQHNlcmlhbGl6YWJsZSgpIGRpc2FibGVkOiBib29sZWFuO1xuICAgIEBzZXJpYWxpemFibGUoKSBsYWJlbDogc3RyaW5nIHwgbnVsbDtcbiAgICBAc2VyaWFsaXphYmxlKCkgdmFsdWU6IFQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IER5bmFtaWNGb3JtT3B0aW9uQ29uZmlnPFQ+KSB7XG5cbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGlzQm9vbGVhbihjb25maWcuZGlzYWJsZWQpID8gY29uZmlnLmRpc2FibGVkIDogZmFsc2U7XG4gICAgICAgIHRoaXMubGFiZWwgPSBjb25maWcubGFiZWwgfHwgbnVsbDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IGNvbmZpZy52YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgdGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFiZWw7XG4gICAgfVxuXG4gICAgc2V0IHRleHQodGV4dDogc3RyaW5nIHwgbnVsbCkge1xuICAgICAgICB0aGlzLmxhYmVsID0gdGV4dDtcbiAgICB9XG5cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemUodGhpcyk7XG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIER5bmFtaWNPcHRpb25Db250cm9sTW9kZWxDb25maWc8VD4gZXh0ZW5kcyBEeW5hbWljRm9ybVZhbHVlQ29udHJvbE1vZGVsQ29uZmlnPFQgfCBUW10+IHtcblxuICAgIG9wdGlvbnM/OiBEeW5hbWljRm9ybU9wdGlvbkNvbmZpZzxUPltdIHwgT2JzZXJ2YWJsZTxEeW5hbWljRm9ybU9wdGlvbkNvbmZpZzxUPltdPjtcbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIER5bmFtaWNPcHRpb25Db250cm9sTW9kZWw8VD4gZXh0ZW5kcyBEeW5hbWljRm9ybVZhbHVlQ29udHJvbE1vZGVsPFQgfCBUW10+IHtcblxuICAgIEBzZXJpYWxpemFibGUoXCJvcHRpb25zXCIpIHByaXZhdGUgX29wdGlvbnM6IER5bmFtaWNGb3JtT3B0aW9uPFQ+W10gPSBbXTtcbiAgICBvcHRpb25zJDogT2JzZXJ2YWJsZTxEeW5hbWljRm9ybU9wdGlvbjxUPltdPjtcblxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3Rvcihjb25maWc6IER5bmFtaWNPcHRpb25Db250cm9sTW9kZWxDb25maWc8VD4sIGxheW91dD86IER5bmFtaWNGb3JtQ29udHJvbExheW91dCkge1xuXG4gICAgICAgIHN1cGVyKGNvbmZpZywgbGF5b3V0KTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBjb25maWcub3B0aW9ucztcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZU9wdGlvbnMkKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm9wdGlvbnMkID0gb2YodGhpcy5vcHRpb25zKTtcbiAgICB9XG5cbiAgICBzZXQgb3B0aW9ucyhvcHRpb25zOiBhbnkpIHtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSkge1xuXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zID0gKG9wdGlvbnMgYXMgRHluYW1pY0Zvcm1PcHRpb25Db25maWc8VD5bXSkubWFwKG9wdGlvbkNvbmZpZyA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEeW5hbWljRm9ybU9wdGlvbjxUPihvcHRpb25Db25maWcpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlT3B0aW9ucyQoKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGlzT2JzZXJ2YWJsZShvcHRpb25zKSkge1xuXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMkID0gKG9wdGlvbnMgYXMgT2JzZXJ2YWJsZTxEeW5hbWljRm9ybU9wdGlvbkNvbmZpZzxUPltdPikucGlwZShcbiAgICAgICAgICAgICAgICBtYXAob3B0aW9uc0NvbmZpZyA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBvcHRpb25zQ29uZmlnLm1hcChvcHRpb25Db25maWcgPT4gbmV3IER5bmFtaWNGb3JtT3B0aW9uPFQ+KG9wdGlvbkNvbmZpZykpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnMkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgb3B0aW9ucygpOiBhbnkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgICB9XG5cbiAgICBhZGQob3B0aW9uQ29uZmlnOiBEeW5hbWljRm9ybU9wdGlvbkNvbmZpZzxUPik6IER5bmFtaWNGb3JtT3B0aW9uPFQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0KHRoaXMub3B0aW9ucy5sZW5ndGgsIG9wdGlvbkNvbmZpZyk7XG4gICAgfVxuXG4gICAgZ2V0KGluZGV4OiBudW1iZXIpOiBEeW5hbWljRm9ybU9wdGlvbjxUPiB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbaW5kZXhdO1xuICAgIH1cblxuICAgIGluc2VydChpbmRleDogbnVtYmVyLCBvcHRpb25Db25maWc6IER5bmFtaWNGb3JtT3B0aW9uQ29uZmlnPFQ+KTogRHluYW1pY0Zvcm1PcHRpb248VD4ge1xuXG4gICAgICAgIGxldCBvcHRpb24gPSBuZXcgRHluYW1pY0Zvcm1PcHRpb24ob3B0aW9uQ29uZmlnKTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMuc3BsaWNlKGluZGV4LCAwLCBvcHRpb24pO1xuICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnMkKCk7XG5cbiAgICAgICAgcmV0dXJuIG9wdGlvbjtcbiAgICB9XG5cbiAgICByZW1vdmUoLi4uaW5kaWNlczogbnVtYmVyW10pOiB2b2lkIHtcblxuICAgICAgICBpbmRpY2VzLmZvckVhY2goaW5kZXggPT4gdGhpcy5vcHRpb25zLnNwbGljZShpbmRleCwgMSkpO1xuICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnMkKCk7XG4gICAgfVxuXG4gICAgYWJzdHJhY3Qgc2VsZWN0KC4uLmluZGljZXM6IG51bWJlcltdKTogdm9pZDtcbn0iXX0=