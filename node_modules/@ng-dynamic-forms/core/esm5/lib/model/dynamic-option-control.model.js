/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { isObservable, of } from "rxjs";
import { map } from "rxjs/operators";
import { DynamicFormValueControlModel } from "./dynamic-form-value-control.model";
import { serializable, serialize } from "../decorator/serializable.decorator";
import { isBoolean } from "../utils/core.utils";
/**
 * @record
 * @template T
 */
export function DynamicFormOptionConfig() { }
if (false) {
    /** @type {?|undefined} */
    DynamicFormOptionConfig.prototype.disabled;
    /** @type {?|undefined} */
    DynamicFormOptionConfig.prototype.label;
    /** @type {?} */
    DynamicFormOptionConfig.prototype.value;
}
/**
 * @template T
 */
var DynamicFormOption = /** @class */ (function () {
    function DynamicFormOption(config) {
        this.disabled = isBoolean(config.disabled) ? config.disabled : false;
        this.label = config.label || null;
        this.value = config.value;
    }
    Object.defineProperty(DynamicFormOption.prototype, "text", {
        get: /**
         * @return {?}
         */
        function () {
            return this.label;
        },
        set: /**
         * @param {?} text
         * @return {?}
         */
        function (text) {
            this.label = text;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    DynamicFormOption.prototype.toJSON = /**
     * @return {?}
     */
    function () {
        return serialize(this);
    };
    tslib_1.__decorate([
        serializable(),
        tslib_1.__metadata("design:type", Boolean)
    ], DynamicFormOption.prototype, "disabled", void 0);
    tslib_1.__decorate([
        serializable(),
        tslib_1.__metadata("design:type", String)
    ], DynamicFormOption.prototype, "label", void 0);
    tslib_1.__decorate([
        serializable(),
        tslib_1.__metadata("design:type", Object)
    ], DynamicFormOption.prototype, "value", void 0);
    return DynamicFormOption;
}());
export { DynamicFormOption };
if (false) {
    /** @type {?} */
    DynamicFormOption.prototype.disabled;
    /** @type {?} */
    DynamicFormOption.prototype.label;
    /** @type {?} */
    DynamicFormOption.prototype.value;
}
/**
 * @record
 * @template T
 */
export function DynamicOptionControlModelConfig() { }
if (false) {
    /** @type {?|undefined} */
    DynamicOptionControlModelConfig.prototype.options;
}
/**
 * @abstract
 * @template T
 */
var DynamicOptionControlModel = /** @class */ (function (_super) {
    tslib_1.__extends(DynamicOptionControlModel, _super);
    function DynamicOptionControlModel(config, layout) {
        var _this = _super.call(this, config, layout) || this;
        _this._options = [];
        _this.options = config.options;
        return _this;
    }
    /**
     * @private
     * @return {?}
     */
    DynamicOptionControlModel.prototype.updateOptions$ = /**
     * @private
     * @return {?}
     */
    function () {
        this.options$ = of(this.options);
    };
    Object.defineProperty(DynamicOptionControlModel.prototype, "options", {
        get: /**
         * @return {?}
         */
        function () {
            return this._options;
        },
        set: /**
         * @param {?} options
         * @return {?}
         */
        function (options) {
            var _this = this;
            if (Array.isArray(options)) {
                this._options = ((/** @type {?} */ (options))).map((/**
                 * @param {?} optionConfig
                 * @return {?}
                 */
                function (optionConfig) {
                    return new DynamicFormOption(optionConfig);
                }));
                this.updateOptions$();
            }
            else if (isObservable(options)) {
                this.options$ = ((/** @type {?} */ (options))).pipe(map((/**
                 * @param {?} optionsConfig
                 * @return {?}
                 */
                function (optionsConfig) {
                    /** @type {?} */
                    var options = optionsConfig.map((/**
                     * @param {?} optionConfig
                     * @return {?}
                     */
                    function (optionConfig) { return new DynamicFormOption(optionConfig); }));
                    _this._options = options;
                    return options;
                })));
            }
            else {
                this.updateOptions$();
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} optionConfig
     * @return {?}
     */
    DynamicOptionControlModel.prototype.add = /**
     * @param {?} optionConfig
     * @return {?}
     */
    function (optionConfig) {
        return this.insert(this.options.length, optionConfig);
    };
    /**
     * @param {?} index
     * @return {?}
     */
    DynamicOptionControlModel.prototype.get = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        return this.options[index];
    };
    /**
     * @param {?} index
     * @param {?} optionConfig
     * @return {?}
     */
    DynamicOptionControlModel.prototype.insert = /**
     * @param {?} index
     * @param {?} optionConfig
     * @return {?}
     */
    function (index, optionConfig) {
        /** @type {?} */
        var option = new DynamicFormOption(optionConfig);
        this.options.splice(index, 0, option);
        this.updateOptions$();
        return option;
    };
    /**
     * @param {...?} indices
     * @return {?}
     */
    DynamicOptionControlModel.prototype.remove = /**
     * @param {...?} indices
     * @return {?}
     */
    function () {
        var _this = this;
        var indices = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            indices[_i] = arguments[_i];
        }
        indices.forEach((/**
         * @param {?} index
         * @return {?}
         */
        function (index) { return _this.options.splice(index, 1); }));
        this.updateOptions$();
    };
    tslib_1.__decorate([
        serializable("options"),
        tslib_1.__metadata("design:type", Array)
    ], DynamicOptionControlModel.prototype, "_options", void 0);
    return DynamicOptionControlModel;
}(DynamicFormValueControlModel));
export { DynamicOptionControlModel };
if (false) {
    /**
     * @type {?}
     * @private
     */
    DynamicOptionControlModel.prototype._options;
    /** @type {?} */
    DynamicOptionControlModel.prototype.options$;
    /**
     * @abstract
     * @param {...?} indices
     * @return {?}
     */
    DynamicOptionControlModel.prototype.select = function (indices) { };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pYy1vcHRpb24tY29udHJvbC5tb2RlbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuZy1keW5hbWljLWZvcm1zL2NvcmUvIiwic291cmNlcyI6WyJsaWIvbW9kZWwvZHluYW1pYy1vcHRpb24tY29udHJvbC5tb2RlbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBYyxZQUFZLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3BELE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNyQyxPQUFPLEVBQUUsNEJBQTRCLEVBQXNDLE1BQU0sb0NBQW9DLENBQUM7QUFFdEgsT0FBTyxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUM5RSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0scUJBQXFCLENBQUM7Ozs7O0FBRWhELDZDQUtDOzs7SUFIRywyQ0FBbUI7O0lBQ25CLHdDQUFlOztJQUNmLHdDQUFTOzs7OztBQUdiO0lBTUksMkJBQVksTUFBa0M7UUFFMUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDckUsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQztRQUNsQyxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDOUIsQ0FBQztJQUVELHNCQUFJLG1DQUFJOzs7O1FBQVI7WUFDSSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDdEIsQ0FBQzs7Ozs7UUFFRCxVQUFTLElBQW1CO1lBQ3hCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLENBQUM7OztPQUpBOzs7O0lBTUQsa0NBQU07OztJQUFOO1FBQ0ksT0FBTyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQXJCZTtRQUFmLFlBQVksRUFBRTs7dURBQW1CO0lBQ2xCO1FBQWYsWUFBWSxFQUFFOztvREFBc0I7SUFDckI7UUFBZixZQUFZLEVBQUU7O29EQUFVO0lBb0I3Qix3QkFBQztDQUFBLEFBeEJELElBd0JDO1NBeEJZLGlCQUFpQjs7O0lBRTFCLHFDQUFrQzs7SUFDbEMsa0NBQXFDOztJQUNyQyxrQ0FBeUI7Ozs7OztBQXNCN0IscURBR0M7OztJQURHLGtEQUFrRjs7Ozs7O0FBR3RGO0lBQTJELHFEQUFxQztJQUs1RixtQ0FBc0IsTUFBMEMsRUFBRSxNQUFpQztRQUFuRyxZQUVJLGtCQUFNLE1BQU0sRUFBRSxNQUFNLENBQUMsU0FHeEI7UUFSZ0MsY0FBUSxHQUEyQixFQUFFLENBQUM7UUFPbkUsS0FBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDOztJQUNsQyxDQUFDOzs7OztJQUVPLGtEQUFjOzs7O0lBQXRCO1FBQ0ksSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFRCxzQkFBSSw4Q0FBTzs7OztRQTRCWDtZQUNJLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUN6QixDQUFDOzs7OztRQTlCRCxVQUFZLE9BQVk7WUFBeEIsaUJBMEJDO1lBeEJHLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtnQkFFeEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLG1CQUFBLE9BQU8sRUFBZ0MsQ0FBQyxDQUFDLEdBQUc7Ozs7Z0JBQUMsVUFBQSxZQUFZO29CQUN0RSxPQUFPLElBQUksaUJBQWlCLENBQUksWUFBWSxDQUFDLENBQUM7Z0JBQ2xELENBQUMsRUFBQyxDQUFDO2dCQUVILElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQzthQUV6QjtpQkFBTSxJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsRUFBRTtnQkFFOUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLG1CQUFBLE9BQU8sRUFBNEMsQ0FBQyxDQUFDLElBQUksQ0FDdEUsR0FBRzs7OztnQkFBQyxVQUFBLGFBQWE7O3dCQUVULE9BQU8sR0FBRyxhQUFhLENBQUMsR0FBRzs7OztvQkFBQyxVQUFBLFlBQVksSUFBSSxPQUFBLElBQUksaUJBQWlCLENBQUksWUFBWSxDQUFDLEVBQXRDLENBQXNDLEVBQUM7b0JBRXZGLEtBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDO29CQUV4QixPQUFPLE9BQU8sQ0FBQztnQkFDbkIsQ0FBQyxFQUFDLENBQUMsQ0FBQzthQUVYO2lCQUFNO2dCQUVILElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQzthQUN6QjtRQUNMLENBQUM7OztPQUFBOzs7OztJQU1ELHVDQUFHOzs7O0lBQUgsVUFBSSxZQUF3QztRQUN4QyxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFDMUQsQ0FBQzs7Ozs7SUFFRCx1Q0FBRzs7OztJQUFILFVBQUksS0FBYTtRQUNiLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvQixDQUFDOzs7Ozs7SUFFRCwwQ0FBTTs7Ozs7SUFBTixVQUFPLEtBQWEsRUFBRSxZQUF3Qzs7WUFFdEQsTUFBTSxHQUFHLElBQUksaUJBQWlCLENBQUMsWUFBWSxDQUFDO1FBRWhELElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDdEMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBRXRCLE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7Ozs7O0lBRUQsMENBQU07Ozs7SUFBTjtRQUFBLGlCQUlDO1FBSk0saUJBQW9CO2FBQXBCLFVBQW9CLEVBQXBCLHFCQUFvQixFQUFwQixJQUFvQjtZQUFwQiw0QkFBb0I7O1FBRXZCLE9BQU8sQ0FBQyxPQUFPOzs7O1FBQUMsVUFBQSxLQUFLLElBQUksT0FBQSxLQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQTdCLENBQTZCLEVBQUMsQ0FBQztRQUN4RCxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDMUIsQ0FBQztJQXBFd0I7UUFBeEIsWUFBWSxDQUFDLFNBQVMsQ0FBQzs7K0RBQStDO0lBdUUzRSxnQ0FBQztDQUFBLEFBekVELENBQTJELDRCQUE0QixHQXlFdEY7U0F6RXFCLHlCQUF5Qjs7Ozs7O0lBRTNDLDZDQUF1RTs7SUFDdkUsNkNBQTZDOzs7Ozs7SUFxRTdDLG9FQUE0QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUsIGlzT2JzZXJ2YWJsZSwgb2YgfSBmcm9tIFwicnhqc1wiO1xuaW1wb3J0IHsgbWFwIH0gZnJvbSBcInJ4anMvb3BlcmF0b3JzXCI7XG5pbXBvcnQgeyBEeW5hbWljRm9ybVZhbHVlQ29udHJvbE1vZGVsLCBEeW5hbWljRm9ybVZhbHVlQ29udHJvbE1vZGVsQ29uZmlnIH0gZnJvbSBcIi4vZHluYW1pYy1mb3JtLXZhbHVlLWNvbnRyb2wubW9kZWxcIjtcbmltcG9ydCB7IER5bmFtaWNGb3JtQ29udHJvbExheW91dCB9IGZyb20gXCIuL21pc2MvZHluYW1pYy1mb3JtLWNvbnRyb2wtbGF5b3V0Lm1vZGVsXCI7XG5pbXBvcnQgeyBzZXJpYWxpemFibGUsIHNlcmlhbGl6ZSB9IGZyb20gXCIuLi9kZWNvcmF0b3Ivc2VyaWFsaXphYmxlLmRlY29yYXRvclwiO1xuaW1wb3J0IHsgaXNCb29sZWFuIH0gZnJvbSBcIi4uL3V0aWxzL2NvcmUudXRpbHNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBEeW5hbWljRm9ybU9wdGlvbkNvbmZpZzxUPiB7XG5cbiAgICBkaXNhYmxlZD86IGJvb2xlYW47XG4gICAgbGFiZWw/OiBzdHJpbmc7XG4gICAgdmFsdWU6IFQ7XG59XG5cbmV4cG9ydCBjbGFzcyBEeW5hbWljRm9ybU9wdGlvbjxUPiB7XG5cbiAgICBAc2VyaWFsaXphYmxlKCkgZGlzYWJsZWQ6IGJvb2xlYW47XG4gICAgQHNlcmlhbGl6YWJsZSgpIGxhYmVsOiBzdHJpbmcgfCBudWxsO1xuICAgIEBzZXJpYWxpemFibGUoKSB2YWx1ZTogVDtcblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogRHluYW1pY0Zvcm1PcHRpb25Db25maWc8VD4pIHtcblxuICAgICAgICB0aGlzLmRpc2FibGVkID0gaXNCb29sZWFuKGNvbmZpZy5kaXNhYmxlZCkgPyBjb25maWcuZGlzYWJsZWQgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5sYWJlbCA9IGNvbmZpZy5sYWJlbCB8fCBudWxsO1xuICAgICAgICB0aGlzLnZhbHVlID0gY29uZmlnLnZhbHVlO1xuICAgIH1cblxuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYWJlbDtcbiAgICB9XG5cbiAgICBzZXQgdGV4dCh0ZXh0OiBzdHJpbmcgfCBudWxsKSB7XG4gICAgICAgIHRoaXMubGFiZWwgPSB0ZXh0O1xuICAgIH1cblxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZSh0aGlzKTtcbiAgICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHluYW1pY09wdGlvbkNvbnRyb2xNb2RlbENvbmZpZzxUPiBleHRlbmRzIER5bmFtaWNGb3JtVmFsdWVDb250cm9sTW9kZWxDb25maWc8VCB8IFRbXT4ge1xuXG4gICAgb3B0aW9ucz86IER5bmFtaWNGb3JtT3B0aW9uQ29uZmlnPFQ+W10gfCBPYnNlcnZhYmxlPER5bmFtaWNGb3JtT3B0aW9uQ29uZmlnPFQ+W10+O1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRHluYW1pY09wdGlvbkNvbnRyb2xNb2RlbDxUPiBleHRlbmRzIER5bmFtaWNGb3JtVmFsdWVDb250cm9sTW9kZWw8VCB8IFRbXT4ge1xuXG4gICAgQHNlcmlhbGl6YWJsZShcIm9wdGlvbnNcIikgcHJpdmF0ZSBfb3B0aW9uczogRHluYW1pY0Zvcm1PcHRpb248VD5bXSA9IFtdO1xuICAgIG9wdGlvbnMkOiBPYnNlcnZhYmxlPER5bmFtaWNGb3JtT3B0aW9uPFQ+W10+O1xuXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKGNvbmZpZzogRHluYW1pY09wdGlvbkNvbnRyb2xNb2RlbENvbmZpZzxUPiwgbGF5b3V0PzogRHluYW1pY0Zvcm1Db250cm9sTGF5b3V0KSB7XG5cbiAgICAgICAgc3VwZXIoY29uZmlnLCBsYXlvdXQpO1xuXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGNvbmZpZy5vcHRpb25zO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlT3B0aW9ucyQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3B0aW9ucyQgPSBvZih0aGlzLm9wdGlvbnMpO1xuICAgIH1cblxuICAgIHNldCBvcHRpb25zKG9wdGlvbnM6IGFueSkge1xuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG5cbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMgPSAob3B0aW9ucyBhcyBEeW5hbWljRm9ybU9wdGlvbkNvbmZpZzxUPltdKS5tYXAob3B0aW9uQ29uZmlnID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IER5bmFtaWNGb3JtT3B0aW9uPFQ+KG9wdGlvbkNvbmZpZyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVPcHRpb25zJCgpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoaXNPYnNlcnZhYmxlKG9wdGlvbnMpKSB7XG5cbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyQgPSAob3B0aW9ucyBhcyBPYnNlcnZhYmxlPER5bmFtaWNGb3JtT3B0aW9uQ29uZmlnPFQ+W10+KS5waXBlKFxuICAgICAgICAgICAgICAgIG1hcChvcHRpb25zQ29uZmlnID0+IHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucyA9IG9wdGlvbnNDb25maWcubWFwKG9wdGlvbkNvbmZpZyA9PiBuZXcgRHluYW1pY0Zvcm1PcHRpb248VD4ob3B0aW9uQ29uZmlnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlT3B0aW9ucyQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBvcHRpb25zKCk6IGFueSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xuICAgIH1cblxuICAgIGFkZChvcHRpb25Db25maWc6IER5bmFtaWNGb3JtT3B0aW9uQ29uZmlnPFQ+KTogRHluYW1pY0Zvcm1PcHRpb248VD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnQodGhpcy5vcHRpb25zLmxlbmd0aCwgb3B0aW9uQ29uZmlnKTtcbiAgICB9XG5cbiAgICBnZXQoaW5kZXg6IG51bWJlcik6IER5bmFtaWNGb3JtT3B0aW9uPFQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1tpbmRleF07XG4gICAgfVxuXG4gICAgaW5zZXJ0KGluZGV4OiBudW1iZXIsIG9wdGlvbkNvbmZpZzogRHluYW1pY0Zvcm1PcHRpb25Db25maWc8VD4pOiBEeW5hbWljRm9ybU9wdGlvbjxUPiB7XG5cbiAgICAgICAgbGV0IG9wdGlvbiA9IG5ldyBEeW5hbWljRm9ybU9wdGlvbihvcHRpb25Db25maWcpO1xuXG4gICAgICAgIHRoaXMub3B0aW9ucy5zcGxpY2UoaW5kZXgsIDAsIG9wdGlvbik7XG4gICAgICAgIHRoaXMudXBkYXRlT3B0aW9ucyQoKTtcblxuICAgICAgICByZXR1cm4gb3B0aW9uO1xuICAgIH1cblxuICAgIHJlbW92ZSguLi5pbmRpY2VzOiBudW1iZXJbXSk6IHZvaWQge1xuXG4gICAgICAgIGluZGljZXMuZm9yRWFjaChpbmRleCA9PiB0aGlzLm9wdGlvbnMuc3BsaWNlKGluZGV4LCAxKSk7XG4gICAgICAgIHRoaXMudXBkYXRlT3B0aW9ucyQoKTtcbiAgICB9XG5cbiAgICBhYnN0cmFjdCBzZWxlY3QoLi4uaW5kaWNlczogbnVtYmVyW10pOiB2b2lkO1xufSJdfQ==